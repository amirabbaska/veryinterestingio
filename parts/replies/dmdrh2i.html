	<ul class="replies">
		<li class="reply">
			<a class="author" href="https://www.reddit.com/user/dirtyuncleron69" target="_blank">dirtyuncleron69</a>
			<div class="markdown"><p>so, this is shift from reflections being out of phase with the original signal, due to a longer path, and those reflections changing with time due to the source moving.</p>
<p>If there were zero reflections, say I'm just in an open field with a router and my phone, would this effect still occur?</p></div>		</li>
					<ul class="replies">
		<li class="reply">
			<a class="author" href="https://www.reddit.com/user/btribble" target="_blank">btribble</a>
			<div class="markdown"><p>Well, we're talking about doppler shift, so I assume you're out in your field on a high speed tractor, so the shift in Hz will still occur, but not the multiple signals caused by reflection. BTW, many of the newer antenna setups attempt to consolidate those multiple reflections and use them to effectively error check each other, so they're not necessarily a <em>bad</em> thing.</p></div>		</li>
					<ul class="replies">
		<li class="reply">
			<a class="author" href="https://www.reddit.com/user/ericGraves" target="_blank">ericGraves</a>
			<div class="markdown"><p>I usually consider WiFi to be indoors. Where a lot of work has been done to mitigate problems caused by reflections and variation in channel.</p>
<p>As for the second part, it is <em>necessarily</em> a bad thing, but yes <a href="https://web.stanford.edu/~dntse/papers/intel04.pdf" target="_blank">diversity gain</a> is pretty cool.  Still though, the capacity of a fading channel is less than the capacity of an AWGN channel, so regardless of coding schemes you are loosing data rate. For instance <a href="https://wsl.stanford.edu/~andrea/Wireless/SampleChapters.pdf" target="_blank">see page 61 (PDF)</a> where the relationship between a flat fading channel and an awgn channel are compared.</p></div>		</li>
						<li class="reply">
			<a class="author" href="https://www.reddit.com/user/dirtyuncleron69" target="_blank">dirtyuncleron69</a>
			<div class="markdown"><p>That was kind of the point I was trying to make, it's phase shift of reflections, not Doppler shift of the signal itself.</p>
<p>The speeds would always be too slow for a true Doppler shift in real scenarios.</p></div>		</li>
						<li class="reply">
			<a class="author" href="https://www.reddit.com/user/scloutkst2889" target="_blank">scloutkst2889</a>
			<div class="markdown"><p>Are you talking about beam forming?</p></div>		</li>
					</ul>
			<li class="reply">
			<a class="author" href="https://www.reddit.com/user/ericGraves" target="_blank">ericGraves</a>
			<div class="markdown"><p>Correct. In that case movement would not have an impact on the channel, and therefore not have an impact on the probability of packet error (other than through attenuation of the signal). </p></div>		</li>
					</ul>
			<li class="reply">
			<a class="author" href="https://www.reddit.com/user/kayson" target="_blank">kayson</a>
			<div class="markdown"><p>A little late to the party, so hijacking the top comment. You're looking at this from a &quot;textbook&quot; information theory standpoint, which gives a great educational introduction, but there's some misinformation here from a practical perspective, so I'll try to give a more in-depth answer.</p>
<p>Strictly speaking, the answer is yes, doppler could have an effect in a theoretical sense, but in practice I don't think it has much real effect.</p>
<p>For your example, 80Hz shift on a 5GHz signal, that's a 0.016ppm error. The frequency accuracy of a wifi transceiver is much much worse than that (10's of ppm). Even if you were constantly moving, it would not significantly contribute to the frequency error at all. Multipath is a good point; I'll get to that later.</p>
<p>Wifi is not always transmitting at the edge of comprehension. The system negotiates a data rate based on the quality of the signal (i.e. the channel capacity, which is mainly based on SNR [signal to noise ratio]). As the SNR degrades, the bit error rate goes up, and the system negotiates a lower data rate. But there's always some margin built in because SNR fluctuates. You won't get a higher data rate until you're high enough above the required SNR that the system thinks you can maintain it even with some degradation. If doppler did cause a significant problem, this is the primary mechanism through which it would reduce the data throughput, since the router would just negotiate a lower rate. (You may be referring to the fact that by Shannon's theorem, if you're approaching the channel capacity, your signal is indistinguishable from noise, but real systems are not quite so aggressive; they are close to capacity though).</p>
<p>Most importantly, any frequency shifts, doppler or otherwise, do not directly affect the transfer rate. Data sent over wifi is organized into &quot;frames,&quot; and these frames are sent at specific time intervals. Regardless of the speed of the source and observer, this rate does not change (ignoring time dilation which is practically irrelevant here), so the data rate does not change.</p>
<p>Regarding PLL's: in practice, the PLL in a modern wifi transceiver is locked to a specific frequency as dictated by the router, and that does not get changed to track the incoming signal in any way. Eventually the router tells it to hop to a different frequency, but again, no tracking. This is one of those things that is taught in a textbook as an introduction but not really relevant in modern systems. For AM, you do need phase coherence, but all modern digital communication systems use quadrature receive and transmit (&quot;noncoherent&quot;, based on what I saw in that chapter you linked), so phase errors are corrected digitally as they are just rotations of the complex plane.</p>
<p>Wifi doesn't use a simple modulation scheme like the ones they show in intro textbooks. It uses <a href="https://en.wikipedia.org/wiki/Orthogonal_frequency-division_multiplexing" target="_blank">OFDM</a>, where each user transmits data over multiple sub-carriers near the channel frequency. Each of those sub-carriers uses a simple modulation scheme like QPSK. The modulator for OFDM is basically an inverse FFT, and the demodulator is an FFT. To do this, you need to figure out how to align your signal, and as a part of this process, the time and frequency errors are removed.</p>
<p>Now regarding multipath: this is a little out of my expertise, but part of the reason for switching to OFDM was specifically to combat multipath. You're right that diversity does help, and <a href="https://en.wikipedia.org/wiki/MIMO-OFDM" target="_blank">&quot;MIMO-OFDM&quot;</a> specifically exploits multipath to improve spectral efficiency. Now keep in mind, the SNR's for wifi are 10-30dB. From what I remember, the effect of multipath is not a limiting factor in performance because the noise is so high. On top of that, in practice, the amount of spreading you get due to doppler in a wifi system is much smaller than the effect of static multipath in the channel because you're never really moving that fast.</p>
<p>For cellular, LTE considers speeds up to something like 500mph, and frequencies as low as 600MHz. In this case, I believe they mitigate doppler/multipath by having some additional guard time before each symbol to avoid ISI.</p>
<p>It's way past my bed time and I just got off a plane, so apologies if I misinterpreted something or stated something in error. I'll check back in the morning.</p></div>		</li>
					<ul class="replies">
		<li class="reply">
			<a class="author" href="https://www.reddit.com/user/ericGraves" target="_blank">ericGraves</a>
			<div class="markdown"><p>So, trade-off between depth and discussion. In general I would like to jump in at the point where the transmitted and received signals are modeled as random variables and how they are statistically related being the channel. Just to validate and verify that characterization would be unreasonable for your average response.</p>
<p>Since you are familiar with communications and communication terminology the argument can be made much simpler. The multi-path environment induces a state dependent channel, where the state is a function of speed, position, and physical environment. For modeling purposes this state can be modeled as either random or deterministic. In multi-path environments the random model is more useful, while deterministic is better for LOS. When you go through the math you see the doppler effect under these parameters will degrade the capacity of the channel. </p>
<p>As for the negotiations, that is a great point, and I do agree that practically that in the average WiFi use, this will have no effect on the data rate. I did not include this in the discussion for two reasons, first these considerations are built into the protocol already (and hence the degradation is always applied), and second a loss of channel capacity can directly correspond to a loss in rate regardless of the negotiation protocol. More specifically let the channel capacity, c, be a function of a random variable V. And let the negotiation scheme allow for rates of r(i) for i in {1,2 ,... , k}, r(i) &lt; r(i+1). The expected data rate would then be Σ r(i) Pr[ r(i+1) &gt; c(V) &gt; r(i)]. If c(V) is then replaced by c'(V) = c(V) - t, the new expected data rate would be Σ r(i) Pr[ r(i+1)+t &gt; c(V) &gt; r(i)+t]. So for example if c(V) is uniform over [1,0], and 1 &gt; r(k)+t &gt; r(1) &gt; 0, then the expected rate lost would r(k) t. Thus degradations in the channel can manifests itself directly as rate loss, even though the negotiation policy makes it a little obtuse. </p></div>		</li>
					<ul class="replies">
		<li class="reply">
			<a class="author" href="https://www.reddit.com/user/kayson" target="_blank">kayson</a>
			<div class="markdown"><p>You're making a lot of textbook assumptions/simplifications here, though, that aren't necessarily true in a real system (and I believe, generally, textbooks use simple modulations for these sorts of derivations). For example, consider a weakly multipath channel, say with one additional highly faded tap very close in time to the direct path. This would degrade capacity only slightly. Now take the same channel, and add a significant amount of noise. The channel capacity is now significantly degraded, and the multipath effect is nonexistent relative to the effect of the noise. I realize this is somewhat pathological, but in practice, if you have a modulation scheme that is resilient to multipath (or if you have little to no multipath), then your capacity is closely approximated by just considering the noise.</p>
<p>I spoke to one our system engineers about doppler effects (he does cellular, but that's a harder case anyway). He said both multipath and doppler are concerns, but doppler is secondary to multipath. He confirmed that OFDM was chosen to be resilient to multipath, and that doppler effects can generally be removed in the digital processing. Part of this is because the doppler effect on multipath is happening very slowly relative to the symbol rate, so the channel is pretty much constant.</p>
<p>Lastly, if I'm interpreting your notation correctly, you're assuming that the negotiated rate is used infinitesimally close to the channel capacity, which as I mentioned is not usually the case. If your margin is greater than the temporary capacity degradation due to increased multipath, then you would not experience any change in expected negotiated rate. That being said, this is somewhat simplistic, since your actual throughput will depend on bit error rate, so any increase in noise (or multipath) will cause a change in throughput, though it may be a negligible change.</p></div>		</li>
					</ul>
		</ul>
			<li class="reply">
			<a class="author" href="https://www.reddit.com/user/Gullex" target="_blank">Gullex</a>
			<div class="markdown"><p>Ooh, something I can actually comment on and sort of know what I'm talking about.</p>
<p>I'm an amateur radio operator and sometimes I like to work satellites with my handheld radio. So, to do this obviously you tune your radio to the proper frequency- trouble is, the satellite is moving so fast that you need to tune it about 5 megahertz up on the approach and 5 down as the satellite is moving away, due to Doppler shift.</p>
<p>This gets pretty tricky as you need to adjust frequency on the fly, and it gets pretty confusing with the flurry of activity you find when you finally reach the &quot;bird&quot;. It helps to have two handheld radios, one to receive and one to transmit.</p></div>		</li>
					</ul>
	